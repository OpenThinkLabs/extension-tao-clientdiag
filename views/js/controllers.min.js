define("taoClientDiagnostic/controller/routes",[],function(){return{CompatibilityChecker:{actions:{index:"controller/compatibilityChecker/index"}}}}),define("taoClientDiagnostic/controller/CompatibilityChecker/checker",["helpers"],function(helpers){var Controller={init:function(){var current=this;$("#proceed").on("click",function(){current._start()})},_start:function(){$(".index").remove();var $info=$("#checker-box");$info.append('<div class="loading"></div>');var nVer=navigator.appVersion,nAgt=navigator.userAgent,browser=this._browser(nAgt),os=this._osName(nAgt),osVersion="-";switch(/Windows/.test(os)&&(osVersion=/Windows (.*)/.exec(os)[1],os="Windows"),os){case"Mac OS X":osVersion=/Mac OS X (10[\.\_\d]+)/.exec(nAgt)[1];
break;case"Android":osVersion=/Android ([\.\_\d]+)/.exec(nAgt)[1];break;case"iOS":osVersion=/OS (\d+)_(\d+)_?(\d+)?/.exec(nVer),osVersion=osVersion[1]+"."+osVersion[2]+"."+(0|osVersion[3])}osVersion=osVersion.replace(/_/g,".");var information={browser:browser.name,browserVersion:browser.version,os:os,osVersion:osVersion};$.post(helpers._url("check","CompatibilityChecker","taoClientDiagnostic"),information,function(data){var $os=$("#os"),$browser=$("#browser");$info.find(".loading").remove(),$os.append(information.os+" "+information.osVersion),$browser.append(information.browser+" "+information.browserVersion),$os.removeClass("hidden"),$browser.removeClass("hidden"),$("#message").html('<img height="45" src="'+data.image+'"/>').removeClass("hidden")
},"json")},_browser:function(nAgt){var nameOffset,verOffset,ix,browser={},found=!1;browser.name=navigator.appName,browser.version=""+parseFloat(navigator.appVersion);for(var id in navigatorName){var nav=navigatorName[id];if(-1!==(verOffset=nAgt.indexOf(nav.name))){browser.name=nav.string,browser.version=nAgt.substring(verOffset+nav.name.length+1),"Trident/"===nav.name&&(browser.version=nAgt.substring(nAgt.indexOf("rv:")+3)),-1!==(verOffset=nAgt.indexOf("Version"))&&(browser.version=nAgt.substring(verOffset+8)),found=!0;break}}return!found&&(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(browser.name=nAgt.substring(nameOffset,verOffset),browser.version=nAgt.substring(verOffset+1),browser.name.toLowerCase()===browser.name.toUpperCase()&&(browser.name=navigator.appName)),-1!==(ix=browser.version.indexOf(";"))&&(browser.version=browser.version.substring(0,ix)),-1!==(ix=browser.version.indexOf(" "))&&(browser.version=browser.version.substring(0,ix)),-1!==(ix=browser.version.indexOf(")"))&&(browser.version=browser.version.substring(0,ix)),majorVersion=parseInt(""+browser.version,10),isNaN(majorVersion)&&(browser.version=""+parseFloat(navigator.appVersion),majorVersion=parseInt(navigator.appVersion,10)),browser
},_osName:function(nAgt){for(var id in operatingStrings){var op=operatingStrings[id];if(op.regex.test(nAgt))return op.name}return"-"}};return Controller.init()});var operatingStrings=[{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows ME",regex:/Windows ME/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Android",regex:/Android/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Linux",regex:/(Linux|X11)/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],navigatorName=[{name:"Opera",string:"Opera"},{name:"MSIE",string:"Microsoft Internet Explorer"},{name:"Chrome",string:"Chrome"},{name:"Safari",string:"Safari"},{name:"Firefox",string:"Firefox"},{name:"Trident/",string:"Microsoft Internet Explorer"}];
define("taoClientDiagnostic/controller/CompatibilityChecker/data",function(){});
//# sourceMappingURL=routes.js.map